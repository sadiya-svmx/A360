@isTest
public class TOOL_ImportDataHandler_UT {

    testmethod static void testInitHandler() {
        Test.startTest();
        
        TOOL_ImportDataHandler importHandler = new TOOL_ImportDataHandler();
        importHandler.initHandler();
        System.assert(importHandler !=null); 
        Test.stopTest();
    }
    
    testmethod static void testHandleMapping_success() {
        Test.startTest();
        
        TOOL_ImportDataHandler importHandler = new TOOL_ImportDataHandler();
        String jsonData = '{"version":"1.0","mappingList":[{"targetObjectAPIName":"ProductRequest","sourceObjectAPIName":"WorkOrder","objectMappingDetails":[{"value":null,"targetFieldAPIName":"WorkOrderId","sourceFieldAPIName":"Id","mappingType":"Field","id":null},{"value":null,"targetFieldAPIName":"DestinationLocationId","sourceFieldAPIName":"LocationId","mappingType":"Field","id":null},{"value":null,"targetFieldAPIName":"CaseId","sourceFieldAPIName":"CaseId","mappingType":"Field","id":null},{"value":null,"targetFieldAPIName":"AccountId","sourceFieldAPIName":"AccountId","mappingType":"Field","id":null},{"value":"Draft","targetFieldAPIName":"Status","sourceFieldAPIName":null,"mappingType":"Value","id":null}],"name":"Work Order To Product Request - A360","mappingType":"Field Mapping","lastModifiedDate":"2020-10-22T12:44:19.000Z","lastModifiedBy":"CS Dev","id":null,"developerName":"WORD_PRRQ_Mapping","description":"Mapping to create new Product Request from Work Order","version":"1.0"},{"targetObjectAPIName":"Asset","sourceObjectAPIName":null,"objectMappingDetails":[{"value":"Installed","targetFieldAPIName":"Status","sourceFieldAPIName":null,"mappingType":"Value","id":null}],"name":"Copy of Asset Installation - A360","mappingType":"Value Mapping","lastModifiedDate":"2020-10-22T12:44:19.000Z","lastModifiedBy":"CS Dev","id":null,"developerName":"Copy_of_Asset_Installation_A360","description":"Mapping to update Asset to installed","version":"1.0"}]}';
        SvmxTooling.ConfigurationData configurationData = (SvmxTooling.ConfigurationData) JSON.deserialize(jsonData, SvmxTooling.ConfigurationData.class);
        String testJsonData = JSON.serialize(configurationData);
        TOOL_AbstractDataHandler.testJsonData = testJsonData;
        importHandler.processConfigurationData();
        System.assert(importHandler !=null); 
        
        Test.stopTest();
    }

    testmethod static void testHandleMapping_exception() {
        Test.startTest();
        
        TOOL_ImportDataHandler importHandler = new TOOL_ImportDataHandler();
        String jsonData = '{"version":"1.0","mappingList":[{"developerName":"Test_Expression", "objectAPIName": "WorkOrder", "expressionDetailList":[{"fieldAPIName":"Description","operator":"eq","operand":"Test","operandType":"Value","id":null}],"name":"Work Order To Product Request - A360","lastModifiedDate":"2020-10-22T12:44:19.000Z","lastModifiedBy":"CS Dev","id":null}]}';
        SvmxTooling.ConfigurationData configurationData = (SvmxTooling.ConfigurationData) JSON.deserialize(jsonData, SvmxTooling.ConfigurationData.class);
        String testJsonData = JSON.serialize(configurationData);
        TOOL_AbstractDataHandler.testJsonData = testJsonData;
        importHandler.processConfigurationData();
        System.assert(importHandler !=null); 
        
        Test.stopTest();
    }

    testmethod static void testHandleExpression_success() {
        Test.startTest();
        
        TOOL_ImportDataHandler importHandler = new TOOL_ImportDataHandler();
        String jsonData = '{"version":"1.0","expressionList":[{"name":"A360 - Asset - Installed", "developerName": "AST_Installed_Expression", "objectAPIName": "Asset", "description": "Asset status is Installed", "advancedExpression": "1", "expressionDetailList":[{"fieldAPIName":"Status","operator":"eq","operand":"Installed","operandType":"Value", "sequence": "1", "fieldType": "Picklist", "id":null}], "lastModifiedDate":"2020-10-22T12:44:19.000Z","lastModifiedBy":"CS Dev","id":null}]}';
        SvmxTooling.ConfigurationData configurationData = (SvmxTooling.ConfigurationData) JSON.deserialize(jsonData, SvmxTooling.ConfigurationData.class);
        String testJsonData = JSON.serialize(configurationData);
        TOOL_AbstractDataHandler.testJsonData = testJsonData;
        importHandler.processConfigurationData();
        System.assert(importHandler !=null); 
        
        Test.stopTest();
    }
    
    testmethod static void testHandleExpression_exception() {
        Test.startTest();
        
        TOOL_ImportDataHandler importHandler = new TOOL_ImportDataHandler();
        String jsonData = '{"version":"1.0","expressionList":[{"targetObjectAPIName":"ProductRequest","sourceObjectAPIName":"WorkOrder","objectMappingDetails":[{"value":null,"targetFieldAPIName":"WorkOrderId","sourceFieldAPIName":"Id","mappingType":"Field","id":null},{"value":null,"targetFieldAPIName":"DestinationLocationId","sourceFieldAPIName":"LocationId","mappingType":"Field","id":null},{"value":null,"targetFieldAPIName":"CaseId","sourceFieldAPIName":"CaseId","mappingType":"Field","id":null},{"value":null,"targetFieldAPIName":"AccountId","sourceFieldAPIName":"AccountId","mappingType":"Field","id":null},{"value":"Draft","targetFieldAPIName":"Status","sourceFieldAPIName":null,"mappingType":"Value","id":null}],"name":"Work Order To Product Request - A360","mappingType":"Field Mapping","lastModifiedDate":"2020-10-22T12:44:19.000Z","lastModifiedBy":"CS Dev","id":null,"developerName":"WORD_PRRQ_Mapping","description":"Mapping to create new Product Request from Work Order","version":"1.0"},{"targetObjectAPIName":"Asset","sourceObjectAPIName":null,"objectMappingDetails":[{"value":"Installed","targetFieldAPIName":"Status","sourceFieldAPIName":null,"mappingType":"Value","id":null}],"name":"Copy of Asset Installation - A360","mappingType":"Value Mapping","lastModifiedDate":"2020-10-22T12:44:19.000Z","lastModifiedBy":"CS Dev","id":null,"developerName":"Copy_of_Asset_Installation_A360","description":"Mapping to update Asset to installed","version":"1.0"}]}';
        SvmxTooling.ConfigurationData configurationData = (SvmxTooling.ConfigurationData) JSON.deserialize(jsonData, SvmxTooling.ConfigurationData.class);
        String testJsonData = JSON.serialize(configurationData);
        TOOL_AbstractDataHandler.testJsonData = testJsonData;
        importHandler.processConfigurationData();
        System.assert(importHandler !=null); 
        
        Test.stopTest();
    }
    
    testmethod static void testHandlePageLayout_success() {
        Test.startTest();
        
        TOOL_ImportDataHandler importHandler = new TOOL_ImportDataHandler();
        String jsonData = '{"version":"1.0","pageLayoutList":[{"pageHeader":{"valueMapping":null,"transactionType":null,"sourceObjectAPIName":null,"sections":[{"sequence":2,"name":"Asset - Entitlement","id":"a0BS000000BPdgQMAT","elements":[{"type":"Field","sequence":1,"row":1,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"AssetId","lookupMatchingField":null,"lookupContextSource":null,"lookupContext":null,"lookupConfigId":null,"id": null,"column":1},{"type":"Field","sequence":2,"row":1,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"SVMXA360__ProductId__c","lookupMatchingField":null,"lookupContextSource":null,"lookupContext":null,"lookupConfigId":null,"id": null,"column":2},{"type":"Field","sequence":3,"row":2,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"AssetWarrantyId","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id": null,"column":1},{"type":"Field","sequence":4,"row":2,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"ServiceContractId","lookupMatchingField":null,"lookupContextSource":null,"lookupContext":null,"lookupConfigId":"a0DS000000BfBXVMA3","id": null,"column":2},{"type":"Field","sequence":5,"row":3,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"Pricebook2Id","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id": null,"column":1}],"columns":2},{"sequence":3,"name":"Debrief","id": null,"elements":[{"type":"Empty Space","sequence":5,"row":3,"required":false,"readOnly":false,"overrideLookupContext":false,"name":null,"lookupMatchingField":null,"lookupContextSource":null,"lookupContext":null,"lookupConfigId":null,"id": null,"column":1},{"type":"Field","sequence":6,"row":3,"required":false,"readOnly":false,"overrideLookupContext":false,"name":"SVMXA360__Resolution__c","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id": null,"column":2},{"type":"Field","sequence":1,"row":1,"required":false,"readOnly":false,"overrideLookupContext":false,"name":"Subject","lookupMatchingField":null,"lookupContextSource":null,"lookupContext":null,"lookupConfigId":null,"id": null,"column":1},{"type":"Field","sequence":3,"row":2,"required":false,"readOnly":false,"overrideLookupContext":false,"name":"Description","lookupMatchingField":null,"lookupContextSource":null,"lookupContext":null,"lookupConfigId":null,"id": null,"column":1},{"type":"Field","sequence":2,"row":1,"required":false,"readOnly":false,"overrideLookupContext":false,"name":"SVMXA360__Symptom__c","lookupMatchingField":null,"lookupContextSource":null,"lookupContext":null,"lookupConfigId":null,"id": null,"column":2},{"type":"Field","sequence":4,"row":2,"required":false,"readOnly":false,"overrideLookupContext":false,"name":"SVMXA360__RootCause__c","lookupMatchingField":null,"lookupContextSource":null,"lookupContext":null,"lookupConfigId":null,"id": null,"column":2}],"columns":2},{"sequence":4,"name":"Service Opportunity","id":null,"elements":[{"type":"Field","sequence":2,"row":1,"required":false,"readOnly":false,"overrideLookupContext":false,"name":"SVMXA360__OpportunityNotes__c","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":2},{"type":"Field","sequence":1,"row":1,"required":false,"readOnly":false,"overrideLookupContext":false,"name":"SVMXA360__OpportunityIdentified__c","lookupMatchingField":null,"lookupContextSource":null,"lookupContext":null,"lookupConfigId":null,"id":null,"column":1}],"columns":2},{"sequence":1,"name":"Overview","id":null,"elements":[{"type":"Field","sequence":2,"row":1,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"Duration","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":2},{"type":"Field","sequence":4,"row":2,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"DurationType","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":2},{"type":"Field","sequence":1,"row":1,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"CaseId","lookupMatchingField":null,"lookupContextSource":null,"lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":3,"row":2,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"MilestoneStatus","lookupMatchingField":null,"lookupContextSource":null,"lookupContext":null,"lookupConfigId":null,"id":null,"column":1}],"columns":2}],"screenType":null,"qualifyingCriteria":null,"objectAPIName":"WorkOrder","fieldMapping":null},"name":"A360 - Manage Work Order Review","lines":[{"valueMapping":null,"sourceObjectAPIName":null,"sourceControllerReferenceField":null,"sortBy":null,"sequence":1,"qualifyingCriteria":null,"presentationType":"Grid","objectAPIName":"WorkOrderLineItem","name":"Labor - Travel","id":null,"fieldMapping":null,"elements":[{"type":"Field","sequence":11,"row":11,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"Status","lookupMatchingField":null,"lookupContextSource":null,"lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":1,"row":1,"required":true,"readOnly":false,"overrideLookupContext":false,"name":"SVMXA360__LineType__c","lookupMatchingField":null,"lookupContextSource":null,"lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":2,"row":2,"required":true,"readOnly":false,"overrideLookupContext":true,"name":"PricebookEntryId","lookupMatchingField":"Pricebook2Id","lookupContextSource":"PARENT_RECORD","lookupContext":"Pricebook2Id","lookupConfigId":"a0DS000000BfBXWMA3","id":null,"column":1},{"type":"Field","sequence":3,"row":3,"required":true,"readOnly":false,"overrideLookupContext":false,"name":"Quantity","lookupMatchingField":null,"lookupContextSource":null,"lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":4,"row":4,"required":true,"readOnly":false,"overrideLookupContext":false,"name":"StartDate","lookupMatchingField":null,"lookupContextSource":null,"lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":5,"row":5,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"EndDate","lookupMatchingField":null,"lookupContextSource":null,"lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":6,"row":6,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"ListPrice","lookupMatchingField":null,"lookupContextSource":null,"lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":7,"row":7,"required":false,"readOnly":false,"overrideLookupContext":false,"name":"UnitPrice","lookupMatchingField":null,"lookupContextSource":null,"lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":8,"row":8,"required":false,"readOnly":false,"overrideLookupContext":false,"name":"Discount","lookupMatchingField":null,"lookupContextSource":null,"lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":9,"row":9,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"TotalPrice","lookupMatchingField":null,"lookupContextSource":null,"lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":10,"row":10,"required":false,"readOnly":false,"overrideLookupContext":false,"name":"Description","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1}],"deleteRow":true,"controllerReferenceField":"WorkOrderId","allowZeroLines":false,"addRow":true},{"valueMapping":null,"sourceObjectAPIName":null,"sourceControllerReferenceField":null,"sortBy":null,"sequence":2,"qualifyingCriteria":null,"presentationType":"Grid","objectAPIName":"ProductConsumed","name":"Product Consumed","id":null,"fieldMapping":null,"elements":[{"type":"Field","sequence":1,"row":1,"required":true,"readOnly":false,"overrideLookupContext":true,"name":"PricebookEntryId","lookupMatchingField":"Pricebook2Id","lookupContextSource":"PARENT_RECORD","lookupContext":"Pricebook2Id","lookupConfigId":"a0DS000000BfBXVMA3","id":null,"column":1},{"type":"Field","sequence":2,"row":2,"required":true,"readOnly":false,"overrideLookupContext":false,"name":"QuantityConsumed","lookupMatchingField":null,"lookupContextSource":null,"lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":3,"row":3,"required":false,"readOnly":false,"overrideLookupContext":false,"name":"UnitPrice","lookupMatchingField":null,"lookupContextSource":null,"lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":4,"row":4,"required":false,"readOnly":false,"overrideLookupContext":false,"name":"Description","lookupMatchingField":null,"lookupContextSource":null,"lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":5,"row":5,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"SVMXA360__ConsumedDate__c","lookupMatchingField":null,"lookupContextSource":null,"lookupContext":null,"lookupConfigId":null,"id":null,"column":1}],"deleteRow":true,"controllerReferenceField":"WorkOrderId","allowZeroLines":false,"addRow":true},{"valueMapping":null,"sourceObjectAPIName":null,"sourceControllerReferenceField":null,"sortBy":null,"sequence":3,"qualifyingCriteria":null,"presentationType":"Grid","objectAPIName":"Expense","name":"Expenses","id":null,"fieldMapping":null,"elements":[{"type":"Field","sequence":1,"row":1,"required":true,"readOnly":false,"overrideLookupContext":false,"name":"ExpenseType","lookupMatchingField":null,"lookupContextSource":null,"lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":2,"row":2,"required":true,"readOnly":false,"overrideLookupContext":false,"name":"Amount","lookupMatchingField":null,"lookupContextSource":null,"lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":3,"row":3,"required":true,"readOnly":false,"overrideLookupContext":false,"name":"Description","lookupMatchingField":null,"lookupContextSource":null,"lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":4,"row":4,"required":true,"readOnly":false,"overrideLookupContext":false,"name":"TransactionDate","lookupMatchingField":null,"lookupContextSource":null,"lookupContext":null,"lookupConfigId":null,"id":null,"column":1}],"deleteRow":true,"controllerReferenceField":"WorkOrderId","allowZeroLines":false,"addRow":true}],"lastModifiedDate":"2021-02-19 22:09:12","lastModifiedBy":"User User","id":null,"developerName":"WORD_Manage_Review_Screen","description":"Edit Work Order review screen"}]}';
        SvmxTooling.ConfigurationData configurationData = (SvmxTooling.ConfigurationData) JSON.deserialize(jsonData, SvmxTooling.ConfigurationData.class);
        String testJsonData = JSON.serialize(configurationData);
        TOOL_AbstractDataHandler.testJsonData = testJsonData;
        importHandler.processConfigurationData();
        System.assert(importHandler !=null); 
        
        Test.stopTest();
    }

    testmethod static void testHandlePageLayout_exception() {
        Test.startTest();
        
        TOOL_ImportDataHandler importHandler = new TOOL_ImportDataHandler();
        String jsonData = '{"version":"1.0","pageLayoutList":[{"name":"A360 - Asset - Installed", "developerName": "AST_Installed_Expression", "objectAPIName": "Asset", "description": "Asset status is Installed", "advancedExpression": "1", "expressionDetailList":[{"fieldAPIName":"Status","operator":"eq","operand":"Installed","operandType":"Value", "sequence": "1", "fieldType": "Picklist", "id":null}], "lastModifiedDate":"2020-10-22T12:44:19.000Z","lastModifiedBy":"CS Dev","id":null}]}';
        SvmxTooling.ConfigurationData configurationData = (SvmxTooling.ConfigurationData) JSON.deserialize(jsonData, SvmxTooling.ConfigurationData.class);
        String testJsonData = JSON.serialize(configurationData);
        TOOL_AbstractDataHandler.testJsonData = testJsonData;
        importHandler.processConfigurationData();
        System.assert(importHandler !=null); 
        
        Test.stopTest();
    }

    testmethod static void testHandleLookupConfig_success() {
        Test.startTest();
        
        TOOL_ImportDataHandler importHandler = new TOOL_ImportDataHandler();
        String jsonData = '{"version":"1.0","lookupConfigList":[{"searchFields":"Name","recordsPerPage":20,"objectAPIName":"PricebookEntry","name":"Product Consumed Product Lookup","lastModifiedDate":"2021-02-19 22:09:11","lastModifiedBy":"User User","id":"a0DS000000BfBXVMA3","fieldToReturn":"Name","extendedFields":null,"displayFields":"Name,UnitPrice","developerName":"Product_Consumed_Product_Lookup","description":null,"defaultOperator":null,"defaultLookup":true,"basicFilterId":null,"basicFilter":null}]}';
        SvmxTooling.ConfigurationData configurationData = (SvmxTooling.ConfigurationData) JSON.deserialize(jsonData, SvmxTooling.ConfigurationData.class);
        String testJsonData = JSON.serialize(configurationData);
        TOOL_AbstractDataHandler.testJsonData = testJsonData;
        importHandler.processConfigurationData();
        System.assert(importHandler !=null); 
        
        Test.stopTest();
    }

    testmethod static void testHandleLookupConfig_exception() {
        Test.startTest();
        
        TOOL_ImportDataHandler importHandler = new TOOL_ImportDataHandler();
        String jsonData = '{"version":"1.0","lookupConfigList":[{"name":"A360 - Asset - Installed", "developerName": "AST_Installed_Expression", "objectAPIName": "Asset", "description": "Asset status is Installed", "advancedExpression": "1", "expressionDetailList":[{"fieldAPIName":"Status","operator":"eq","operand":"Installed","operandType":"Value", "sequence": "1", "fieldType": "Picklist", "id":null}], "lastModifiedDate":"2020-10-22T12:44:19.000Z","lastModifiedBy":"CS Dev","id":null}]}';
        SvmxTooling.ConfigurationData configurationData = (SvmxTooling.ConfigurationData) JSON.deserialize(jsonData, SvmxTooling.ConfigurationData.class);
        String testJsonData = JSON.serialize(configurationData);
        TOOL_AbstractDataHandler.testJsonData = testJsonData;
        importHandler.processConfigurationData();
        System.assert(importHandler !=null); 
        
        Test.stopTest();
    }
    
    testmethod static void testHandleProcessWizard_success() {
        List<SVMXA360__CONF_ProcessWizard__c> wizardRecordList = (List<SVMXA360__CONF_ProcessWizard__c>)SvmxTestDataFactory.createSObjectList( 'SVMXA360__CONF_ProcessWizard__c', 2 );

        wizardRecordList[0].SVMXA360__ObjectAPIName__c = 'Account';
        wizardRecordList[1].SVMXA360__ObjectAPIName__c = 'ReturnOrder';

        insert wizardRecordList;

        Test.startTest();
        
        TOOL_ImportDataHandler importHandler = new TOOL_ImportDataHandler();
        String jsonData = '{"version":"1.0","wizardList":[{"steps":[{"type":"Flow","target":"RORD_Manage_Return_Order_Submission","stepParameters":null,"sequence":1,"referenceId":null,"processWizardId":"a0LS000000BIFXCMA5","openAsModal":false,"namespace":"SVMXA360","name":"Submit Return Order","lastModifiedDate":"2021-02-19T22:09:15.000Z","lastModifiedBy":"User User","isVisible":true,"isModified":false,"id":null,"iconName":null,"helpText":"Submit a Return Order","expressionName":"A360 - Return Order - Draft","expressionId":"a08S000000IGp6HIAT","criteriaActionHelpText":"Can only Submit a Draft Return Order","criteriaAction":"Disable Step"},{"type":"Flow","target":"RORD_Manage_Return_Order_Cancellation","stepParameters":null,"sequence":2,"referenceId":null,"processWizardId":"a0LS000000BIFXCMA5","openAsModal":false,"namespace":"SVMXA360","name":"Cancel Return Order","lastModifiedDate":"2021-02-19T22:09:15.000Z","lastModifiedBy":"User User","isVisible":true,"isModified":false,"id":null,"iconName":null,"helpText":"Cancel a Return Order","expressionName":"A360 - Return Order - Not Closed Nor Canceled","expressionId":"a08S000000IGp6IIAT","criteriaActionHelpText":"Cannot cancel a Return Order when it is Closed or Canceled","criteriaAction":"Disable Step"}],"sequence":0,"scope":"Object","referenceId":null,"objectAPIName":"ReturnOrder","name":"Return Order Management","lastModifiedDate":"2021-02-19T22:09:15.000Z","lastModifiedBy":"User User","isVisible":true,"isModified":false,"id":null,"expressionName":null,"expressionId":null,"developerName":"RORD_Management_Wizard","description":"Steps to manage the lifecycle of a Return Order","active":true,"access":[{"profileId":"00eS0000000xt4sIAA","processWizardId":"a0LS000000BIFXCMA5","name":"PWA-00000000","lastModifiedDate":"2021-02-19T22:09:16.000Z","lastModifiedBy":"User User","isModified":false,"id":null}]}]}';
        SvmxTooling.ConfigurationData configurationData = (SvmxTooling.ConfigurationData) JSON.deserialize(jsonData, SvmxTooling.ConfigurationData.class);
        String testJsonData = JSON.serialize(configurationData);
        TOOL_AbstractDataHandler.testJsonData = testJsonData;
        importHandler.processConfigurationData();
        System.assert(importHandler !=null); 
        
        Test.stopTest();
    }

    testmethod static void testHandleProcessWizard_exception() {
        Test.startTest();
        
        TOOL_ImportDataHandler importHandler = new TOOL_ImportDataHandler();
        String jsonData = '{"version":"1.0","wizardList":[{"name":"A360 - Asset - Installed", "developerName": "AST_Installed_Expression", "objectAPIName": "Asset", "description": "Asset status is Installed", "advancedExpression": "1", "expressionDetailList":[{"fieldAPIName":"Status","operator":"eq","operand":"Installed","operandType":"Value", "sequence": "1", "fieldType": "Picklist", "id":null}], "lastModifiedDate":"2020-10-22T12:44:19.000Z","lastModifiedBy":"CS Dev","id":null}]}';
        SvmxTooling.ConfigurationData configurationData = (SvmxTooling.ConfigurationData) JSON.deserialize(jsonData, SvmxTooling.ConfigurationData.class);
        String testJsonData = JSON.serialize(configurationData);
        TOOL_AbstractDataHandler.testJsonData = testJsonData;
        importHandler.processConfigurationData();
        System.assert(importHandler !=null); 
        
        Test.stopTest();
    }
    
    testmethod static void testHandleEntitlementRule_success() {
        Test.startTest();
        
        TOOL_ImportDataHandler importHandler = new TOOL_ImportDataHandler();
        String jsonData = '{"version":"1.0","entitlementRuleList":[{"objectAPIName":"Case","name":"Case Entitlement - A360","matchAccount":true,"lastModifiedDate":"2021-02-19T22:09:17.000Z","lastModifiedBy":"User User","includeRootAsset":true,"includeParentAsset":false,"id":null,"developerName":"CASE_Entitlement","defaultBillingType":null,"coveredBy":"Asset","assetAPIName":"AssetId","accountAPIName":"AccountId","warrantyTypes":null,"sequence":1,"resolutionMethod":"USE-WARRANTY","matchContact":false,"isActive":true,"expression":{"type":null,"objectAPIName":null,"name":null,"lastModifiedDate":null,"lastModifiedBy":null,"id":null,"expressionType":null,"expressionDetailList":null,"developerName":null,"description":null,"criteria":null,"advancedExpression":null},"description":"Default entitlement rule for Case","checkWarranties":true,"checkContracts":true}]}';
        SvmxTooling.ConfigurationData configurationData = (SvmxTooling.ConfigurationData) JSON.deserialize(jsonData, SvmxTooling.ConfigurationData.class);
        String testJsonData = JSON.serialize(configurationData);
        TOOL_AbstractDataHandler.testJsonData = testJsonData;
        importHandler.processConfigurationData();
        System.assert(importHandler !=null); 
        
        Test.stopTest();
    }

    testmethod static void testHandleEntitlementRule_exception() {
        Test.startTest();
        
        TOOL_ImportDataHandler importHandler = new TOOL_ImportDataHandler();
        String jsonData = '{"version":"1.0","entitlementRuleList":[{"name":"A360 - Asset - Installed", "developerName": "AST_Installed_Expression", "objectAPIName": "Asset", "description": "Asset status is Installed", "advancedExpression": "1", "expressionDetailList":[{"fieldAPIName":"Status","operator":"eq","operand":"Installed","operandType":"Value", "sequence": "1", "fieldType": "Picklist", "id":null}], "lastModifiedDate":"2020-10-22T12:44:19.000Z","lastModifiedBy":"CS Dev","id":null}]}';
        SvmxTooling.ConfigurationData configurationData = (SvmxTooling.ConfigurationData) JSON.deserialize(jsonData, SvmxTooling.ConfigurationData.class);
        String testJsonData = JSON.serialize(configurationData);
        TOOL_AbstractDataHandler.testJsonData = testJsonData;
        importHandler.processConfigurationData();
        System.assert(importHandler !=null); 
        
        Test.stopTest();
    }

    testmethod static void testHandleAdminPage_success() {
        Test.startTest();
        
        TOOL_ImportDataHandler importHandler = new TOOL_ImportDataHandler();
        String jsonData = '{"version":"1.0","adminPageList":[{"targetType":null,"targetDeveloperName":null,"sequence":1,"parameters":null,"pageType":"GROUP","name":"Entitlement","isActive":true,"id":"a01S000000P8cixIAB","developerName":"entitlement","description":"Entitlement Grouping","children":[{"targetType":"LWC","targetDeveloperName":"c-automatic-rules","sequence":1,"parameters":null,"pageType":"PAGE","name":"Automatic Rules","isActive":true,"id":"a01S000000P8cj2IAB","developerName":"automatic_rules","description":"Automatic Rules","children":null},{"targetType":"LWC","targetDeveloperName":"c-entitlement-settings","sequence":2,"parameters":null,"pageType":"PAGE","name":"Interactive Entitlement","isActive":true,"id":"a01S000000P8cj3IAB","developerName":"interactive_entitlement","description":"Interactive Entitlement","children":null},{"targetType":"LWC","targetDeveloperName":"c-service-assignment-rules","sequence":3,"parameters":null,"pageType":"PAGE","name":"Service Assignment Rules","isActive":true,"id":"a01S000000P8cj4IAB","developerName":"service_assignment_rules","description":"Service Assignment Rules","children":null},{"targetType":"LWC","targetDeveloperName":"c-pricebook-assignment-list-view","sequence":4,"parameters":null,"pageType":"PAGE","name":"Pricebook Assignment Rules","isActive":true,"id":"a01S000000P8cj5IAB","developerName":"pricebook_assignment_rules","description":"Pricebook Assignment Rules","children":null},{"targetType":"LWC","targetDeveloperName":"c-entitlement-common-settings","sequence":5,"parameters":null,"pageType":"PAGE","name":"Settings","isActive":true,"id":"a01S000000P8cj6IAB","developerName":"entitlement_common_settings","description":"Entitlement Common Settings","children":null}]}]}';
        SvmxTooling.ConfigurationData configurationData = (SvmxTooling.ConfigurationData) JSON.deserialize(jsonData, SvmxTooling.ConfigurationData.class);
        String testJsonData = JSON.serialize(configurationData);
        TOOL_AbstractDataHandler.testJsonData = testJsonData;
        importHandler.processConfigurationData();
        System.assert(importHandler !=null); 
        
        Test.stopTest();
    }

    testmethod static void testHandleAdminPage_exception() {
        Test.startTest();
        
        TOOL_ImportDataHandler importHandler = new TOOL_ImportDataHandler();
        String jsonData = '{"version":"1.0","adminPageList":[{"objectAPIName":"Case","name":"Case Entitlement - A360","matchAccount":true,"lastModifiedDate":"2021-02-19T22:09:17.000Z","lastModifiedBy":"User User","includeRootAsset":true,"includeParentAsset":false,"id":null,"developerName":"CASE_Entitlement","defaultBillingType":null,"coveredBy":"Asset","assetAPIName":"AssetId","accountAPIName":"AccountId","warrantyTypes":null,"sequence":1,"resolutionMethod":"USE-WARRANTY","matchContact":false,"isActive":true,"expression":{"type":null,"objectAPIName":null,"name":null,"lastModifiedDate":null,"lastModifiedBy":null,"id":null,"expressionType":null,"expressionDetailList":null,"developerName":null,"description":null,"criteria":null,"advancedExpression":null},"description":"Default entitlement rule for Case","checkWarranties":true,"checkContracts":true}]}';
        SvmxTooling.ConfigurationData configurationData = (SvmxTooling.ConfigurationData) JSON.deserialize(jsonData, SvmxTooling.ConfigurationData.class);
        String testJsonData = JSON.serialize(configurationData);
        TOOL_AbstractDataHandler.testJsonData = testJsonData;
        importHandler.processConfigurationData();
        System.assert(importHandler !=null); 
        
        Test.stopTest();
    }

    testmethod static void testHandleTransaction_success() {
        Test.startTest();
        
        TOOL_ImportDataHandler importHandler = new TOOL_ImportDataHandler();
        String jsonData = '{"version":"1.0","transactionList":[{"pageHeader":{"valueMapping":null,"transactionType":"Standalone Edit","sourceObjectAPIName":null,"sections":[{"sequence":3,"name":"Opportunity","id":null,"elements":[{"type":"Field","sequence":1,"row":1,"required":false,"readOnly":false,"overrideLookupContext":false,"name":"SVMXA360__OpportunityIdentified__c","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":2,"row":1,"required":false,"readOnly":false,"overrideLookupContext":false,"name":"SVMXA360__OpportunityNotes__c","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":2}],"columns":2},{"sequence":1,"name":"Work Order","id":null,"elements":[{"type":"Field","sequence":1,"row":1,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"AssetId","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":2,"row":1,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"SVMXA360__ProductId__c","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":2},{"type":"Field","sequence":3,"row":2,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"Pricebook2Id","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":4,"row":2,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"SVMXA360__BillingType__c","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":2}],"columns":2},{"sequence":2,"name":"Debrief","id":null,"elements":[{"type":"Field","sequence":1,"row":1,"required":false,"readOnly":false,"overrideLookupContext":false,"name":"Subject","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":2,"row":1,"required":false,"readOnly":false,"overrideLookupContext":false,"name":"SVMXA360__Symptom__c","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":2},{"type":"Field","sequence":3,"row":2,"required":false,"readOnly":false,"overrideLookupContext":false,"name":"Description","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":4,"row":2,"required":false,"readOnly":false,"overrideLookupContext":false,"name":"SVMXA360__RootCause__c","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":2},{"type":"Field","sequence":5,"row":3,"required":false,"readOnly":false,"overrideLookupContext":false,"name":"SVMXA360__Resolution__c","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":2}],"columns":2}],"screenType":"Transaction","qualifyingCriteria":null,"objectAPIName":"WorkOrder","fieldMapping":null},"name":"A360 - Manage Work Order Debrief","lines":[{"valueMapping":"a0FS000000EDjbfMAD","sourceObjectAPIName":null,"sourceControllerReferenceField":null,"sortBy":null,"sequence":1,"qualifyingCriteria":null,"presentationType":null,"objectAPIName":"WorkOrderLineItem","name":"Labor/Travel","id":"a0AS000000BynghMAB","fieldMapping":null,"elements":[{"type":"Field","sequence":1,"row":1,"required":true,"readOnly":false,"overrideLookupContext":false,"name":"SVMXA360__LineType__c","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":2,"row":2,"required":true,"readOnly":false,"overrideLookupContext":true,"name":"PricebookEntryId","lookupMatchingField":"Pricebook2Id","lookupContextSource":"PARENT_RECORD","lookupContext":"Pricebook2Id","lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":3,"row":3,"required":true,"readOnly":false,"overrideLookupContext":false,"name":"Quantity","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":4,"row":4,"required":false,"readOnly":false,"overrideLookupContext":false,"name":"StartDate","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":5,"row":5,"required":false,"readOnly":false,"overrideLookupContext":false,"name":"EndDate","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":6,"row":6,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"ListPrice","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":7,"row":7,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"SVMXA360__EntitledDiscount__c","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":8,"row":8,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"SVMXA360__Surcharge__c","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":9,"row":9,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"SVMXA360__EntitledPrice__c","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":10,"row":10,"required":false,"readOnly":false,"overrideLookupContext":false,"name":"UnitPrice","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":11,"row":11,"required":false,"readOnly":false,"overrideLookupContext":false,"name":"Discount","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":12,"row":12,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"TotalPrice","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":13,"row":13,"required":false,"readOnly":false,"overrideLookupContext":false,"name":"Status","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1}],"deleteRow":true,"controllerReferenceField":"WorkOrderId","allowZeroLines":true,"addRow":true},{"valueMapping":null,"sourceObjectAPIName":null,"sourceControllerReferenceField":null,"sortBy":null,"sequence":2,"qualifyingCriteria":null,"presentationType":null,"objectAPIName":"ProductConsumed","name":"Product Consumed","id":null,"fieldMapping":null,"elements":[{"type":"Field","sequence":1,"row":1,"required":true,"readOnly":false,"overrideLookupContext":true,"name":"PricebookEntryId","lookupMatchingField":"Pricebook2Id","lookupContextSource":"PARENT_RECORD","lookupContext":"Pricebook2Id","lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":2,"row":2,"required":true,"readOnly":false,"overrideLookupContext":false,"name":"QuantityConsumed","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":5,"row":5,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"SVMXA360__Surcharge__c","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":6,"row":6,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"SVMXA360__EntitledPrice__c","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":7,"row":7,"required":false,"readOnly":false,"overrideLookupContext":false,"name":"UnitPrice","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":8,"row":8,"required":false,"readOnly":false,"overrideLookupContext":false,"name":"Discount","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":9,"row":9,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"TotalPrice","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":3,"row":3,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"ListPrice","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":4,"row":4,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"SVMXA360__EntitledDiscount__c","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1}],"deleteRow":true,"controllerReferenceField":"WorkOrderId","allowZeroLines":true,"addRow":true},{"valueMapping":"a0FS000000EDjbgMAD","sourceObjectAPIName":null,"sourceControllerReferenceField":null,"sortBy":null,"sequence":3,"qualifyingCriteria":null,"presentationType":null,"objectAPIName":"Expense","name":"Expense","id":null,"fieldMapping":null,"elements":[{"type":"Field","sequence":1,"row":1,"required":true,"readOnly":false,"overrideLookupContext":false,"name":"ExpenseType","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":3,"row":3,"required":true,"readOnly":false,"overrideLookupContext":false,"name":"SVMXA360__ExpenseItem__c","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":2,"row":2,"required":true,"readOnly":false,"overrideLookupContext":false,"name":"TransactionDate","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":4,"row":4,"required":true,"readOnly":false,"overrideLookupContext":false,"name":"Quantity","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":5,"row":5,"required":true,"readOnly":false,"overrideLookupContext":false,"name":"Amount","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":8,"row":8,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"SVMXA360__EntitledPrice__c","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":9,"row":9,"required":false,"readOnly":false,"overrideLookupContext":false,"name":"UnitPrice","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":10,"row":10,"required":false,"readOnly":false,"overrideLookupContext":false,"name":"Discount","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":11,"row":11,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"TotalPrice","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":12,"row":12,"required":false,"readOnly":false,"overrideLookupContext":false,"name":"Description","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":6,"row":6,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"SVMXA360__EntitledDiscount__c","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":7,"row":7,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"SVMXA360__Surcharge__c","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1}],"deleteRow":true,"controllerReferenceField":"WorkOrderId","allowZeroLines":true,"addRow":true}],"lastModifiedDate":"2021-02-19 22:09:17","lastModifiedBy":"User User","id":null,"developerName":"WORD_Manage_Debrief_Transaction","description":"Edit Work Order for debrief"}]}';
        SvmxTooling.ConfigurationData configurationData = (SvmxTooling.ConfigurationData) JSON.deserialize(jsonData, SvmxTooling.ConfigurationData.class);
        String testJsonData = JSON.serialize(configurationData);
        TOOL_AbstractDataHandler.testJsonData = testJsonData;
        importHandler.processConfigurationData();
        System.assert(importHandler !=null); 
        
        Test.stopTest();
    }

    testmethod static void testHandleTransaction_exception() {
        Test.startTest();
        
        TOOL_ImportDataHandler importHandler = new TOOL_ImportDataHandler();
        String jsonData = '{"version":"1.0","transactionList":[{"targetType":null,"targetDeveloperName":null,"sequence":1,"parameters":null,"pageType":"GROUP","name":"Entitlement","isActive":true,"id":"a01S000000P8cixIAB","developerName":"entitlement","description":"Entitlement Grouping","children":[{"targetType":"LWC","targetDeveloperName":"c-automatic-rules","sequence":1,"parameters":null,"pageType":"PAGE","name":"Automatic Rules","isActive":true,"id":"a01S000000P8cj2IAB","developerName":"automatic_rules","description":"Automatic Rules","children":null},{"targetType":"LWC","targetDeveloperName":"c-entitlement-settings","sequence":2,"parameters":null,"pageType":"PAGE","name":"Interactive Entitlement","isActive":true,"id":"a01S000000P8cj3IAB","developerName":"interactive_entitlement","description":"Interactive Entitlement","children":null},{"targetType":"LWC","targetDeveloperName":"c-service-assignment-rules","sequence":3,"parameters":null,"pageType":"PAGE","name":"Service Assignment Rules","isActive":true,"id":"a01S000000P8cj4IAB","developerName":"service_assignment_rules","description":"Service Assignment Rules","children":null},{"targetType":"LWC","targetDeveloperName":"c-pricebook-assignment-list-view","sequence":4,"parameters":null,"pageType":"PAGE","name":"Pricebook Assignment Rules","isActive":true,"id":"a01S000000P8cj5IAB","developerName":"pricebook_assignment_rules","description":"Pricebook Assignment Rules","children":null},{"targetType":"LWC","targetDeveloperName":"c-entitlement-common-settings","sequence":5,"parameters":null,"pageType":"PAGE","name":"Settings","isActive":true,"id":"a01S000000P8cj6IAB","developerName":"entitlement_common_settings","description":"Entitlement Common Settings","children":null}]}]}';
        SvmxTooling.ConfigurationData configurationData = (SvmxTooling.ConfigurationData) JSON.deserialize(jsonData, SvmxTooling.ConfigurationData.class);
        String testJsonData = JSON.serialize(configurationData);
        TOOL_AbstractDataHandler.testJsonData = testJsonData;
        importHandler.processConfigurationData();
        System.assert(importHandler !=null); 
        
        Test.stopTest();
    }

    testmethod static void testparseDataWrapper() {
        Test.startTest();
        
        TOOL_ImportDataHandler importHandler = new TOOL_ImportDataHandler(true, '1.0');
        String jsonData = '{"version":"2.0","mappingList":[{"targetObjectAPIName":"ProductRequest","sourceObjectAPIName":"WorkOrder","objectMappingDetails":[{"value":null,"targetFieldAPIName":"WorkOrderId","sourceFieldAPIName":"Id","mappingType":"Field","id":null},{"value":null,"targetFieldAPIName":"DestinationLocationId","sourceFieldAPIName":"LocationId","mappingType":"Field","id":null},{"value":null,"targetFieldAPIName":"CaseId","sourceFieldAPIName":"CaseId","mappingType":"Field","id":null},{"value":null,"targetFieldAPIName":"AccountId","sourceFieldAPIName":"AccountId","mappingType":"Field","id":null},{"value":"Draft","targetFieldAPIName":"Status","sourceFieldAPIName":null,"mappingType":"Value","id":null}],"name":"Work Order To Product Request - A360","mappingType":"Field Mapping","lastModifiedDate":"2020-10-22T12:44:19.000Z","lastModifiedBy":"CS Dev","id":null,"developerName":"WORD_PRRQ_Mapping","description":"Mapping to create new Product Request from Work Order","version":"1.0"},{"targetObjectAPIName":"Asset","sourceObjectAPIName":null,"objectMappingDetails":[{"value":"Installed","targetFieldAPIName":"Status","sourceFieldAPIName":null,"mappingType":"Value","id":null}],"name":"Copy of Asset Installation - A360","mappingType":"Value Mapping","lastModifiedDate":"2020-10-22T12:44:19.000Z","lastModifiedBy":"CS Dev","id":null,"developerName":"Copy_of_Asset_Installation_A360","description":"Mapping to update Asset to installed","version":"1.0"}],"expressionList":[{"name":"A360 - Asset - Installed", "developerName": "AST_Installed_Expression", "objectAPIName": "Asset", "description": "Asset status is Installed", "advancedExpression": "1", "expressionDetailList":[{"fieldAPIName":"Status","operator":"eq","operand":"Installed","operandType":"Value", "sequence": "1", "fieldType": "Picklist", "id":null}], "lastModifiedDate":"2020-10-22T12:44:19.000Z","lastModifiedBy":"CS Dev","id":null}], "pageLayoutList":[{"pageHeader":{"valueMapping":null,"transactionType":null,"sourceObjectAPIName":null,"sections":[{"sequence":2,"name":"Asset - Entitlement","id":"a0BS000000BPdgQMAT","elements":[{"type":"Field","sequence":1,"row":1,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"AssetId","lookupMatchingField":null,"lookupContextSource":null,"lookupContext":null,"lookupConfigId":null,"id": null,"column":1},{"type":"Field","sequence":2,"row":1,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"SVMXA360__ProductId__c","lookupMatchingField":null,"lookupContextSource":null,"lookupContext":null,"lookupConfigId":null,"id": null,"column":2},{"type":"Field","sequence":3,"row":2,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"AssetWarrantyId","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id": null,"column":1},{"type":"Field","sequence":4,"row":2,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"ServiceContractId","lookupMatchingField":null,"lookupContextSource":null,"lookupContext":null,"lookupConfigId":"a0DS000000BfBXVMA3","id": null,"column":2},{"type":"Field","sequence":5,"row":3,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"Pricebook2Id","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id": null,"column":1}],"columns":2},{"sequence":3,"name":"Debrief","id": null,"elements":[{"type":"Empty Space","sequence":5,"row":3,"required":false,"readOnly":false,"overrideLookupContext":false,"name":null,"lookupMatchingField":null,"lookupContextSource":null,"lookupContext":null,"lookupConfigId":null,"id": null,"column":1},{"type":"Field","sequence":6,"row":3,"required":false,"readOnly":false,"overrideLookupContext":false,"name":"SVMXA360__Resolution__c","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id": null,"column":2},{"type":"Field","sequence":1,"row":1,"required":false,"readOnly":false,"overrideLookupContext":false,"name":"Subject","lookupMatchingField":null,"lookupContextSource":null,"lookupContext":null,"lookupConfigId":null,"id": null,"column":1},{"type":"Field","sequence":3,"row":2,"required":false,"readOnly":false,"overrideLookupContext":false,"name":"Description","lookupMatchingField":null,"lookupContextSource":null,"lookupContext":null,"lookupConfigId":null,"id": null,"column":1},{"type":"Field","sequence":2,"row":1,"required":false,"readOnly":false,"overrideLookupContext":false,"name":"SVMXA360__Symptom__c","lookupMatchingField":null,"lookupContextSource":null,"lookupContext":null,"lookupConfigId":null,"id": null,"column":2},{"type":"Field","sequence":4,"row":2,"required":false,"readOnly":false,"overrideLookupContext":false,"name":"SVMXA360__RootCause__c","lookupMatchingField":null,"lookupContextSource":null,"lookupContext":null,"lookupConfigId":null,"id": null,"column":2}],"columns":2},{"sequence":4,"name":"Service Opportunity","id":null,"elements":[{"type":"Field","sequence":2,"row":1,"required":false,"readOnly":false,"overrideLookupContext":false,"name":"SVMXA360__OpportunityNotes__c","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":2},{"type":"Field","sequence":1,"row":1,"required":false,"readOnly":false,"overrideLookupContext":false,"name":"SVMXA360__OpportunityIdentified__c","lookupMatchingField":null,"lookupContextSource":null,"lookupContext":null,"lookupConfigId":null,"id":null,"column":1}],"columns":2},{"sequence":1,"name":"Overview","id":null,"elements":[{"type":"Field","sequence":2,"row":1,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"Duration","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":2},{"type":"Field","sequence":4,"row":2,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"DurationType","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":2},{"type":"Field","sequence":1,"row":1,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"CaseId","lookupMatchingField":null,"lookupContextSource":null,"lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":3,"row":2,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"MilestoneStatus","lookupMatchingField":null,"lookupContextSource":null,"lookupContext":null,"lookupConfigId":null,"id":null,"column":1}],"columns":2}],"screenType":null,"qualifyingCriteria":null,"objectAPIName":"WorkOrder","fieldMapping":null},"name":"A360 - Manage Work Order Review","lines":[{"valueMapping":null,"sourceObjectAPIName":null,"sourceControllerReferenceField":null,"sortBy":null,"sequence":1,"qualifyingCriteria":null,"presentationType":"Grid","objectAPIName":"WorkOrderLineItem","name":"Labor - Travel","id":null,"fieldMapping":null,"elements":[{"type":"Field","sequence":11,"row":11,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"Status","lookupMatchingField":null,"lookupContextSource":null,"lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":1,"row":1,"required":true,"readOnly":false,"overrideLookupContext":false,"name":"SVMXA360__LineType__c","lookupMatchingField":null,"lookupContextSource":null,"lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":2,"row":2,"required":true,"readOnly":false,"overrideLookupContext":true,"name":"PricebookEntryId","lookupMatchingField":"Pricebook2Id","lookupContextSource":"PARENT_RECORD","lookupContext":"Pricebook2Id","lookupConfigId":"a0DS000000BfBXWMA3","id":null,"column":1},{"type":"Field","sequence":3,"row":3,"required":true,"readOnly":false,"overrideLookupContext":false,"name":"Quantity","lookupMatchingField":null,"lookupContextSource":null,"lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":4,"row":4,"required":true,"readOnly":false,"overrideLookupContext":false,"name":"StartDate","lookupMatchingField":null,"lookupContextSource":null,"lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":5,"row":5,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"EndDate","lookupMatchingField":null,"lookupContextSource":null,"lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":6,"row":6,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"ListPrice","lookupMatchingField":null,"lookupContextSource":null,"lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":7,"row":7,"required":false,"readOnly":false,"overrideLookupContext":false,"name":"UnitPrice","lookupMatchingField":null,"lookupContextSource":null,"lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":8,"row":8,"required":false,"readOnly":false,"overrideLookupContext":false,"name":"Discount","lookupMatchingField":null,"lookupContextSource":null,"lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":9,"row":9,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"TotalPrice","lookupMatchingField":null,"lookupContextSource":null,"lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":10,"row":10,"required":false,"readOnly":false,"overrideLookupContext":false,"name":"Description","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1}],"deleteRow":true,"controllerReferenceField":"WorkOrderId","allowZeroLines":false,"addRow":true},{"valueMapping":null,"sourceObjectAPIName":null,"sourceControllerReferenceField":null,"sortBy":null,"sequence":2,"qualifyingCriteria":null,"presentationType":"Grid","objectAPIName":"ProductConsumed","name":"Product Consumed","id":null,"fieldMapping":null,"elements":[{"type":"Field","sequence":1,"row":1,"required":true,"readOnly":false,"overrideLookupContext":true,"name":"PricebookEntryId","lookupMatchingField":"Pricebook2Id","lookupContextSource":"PARENT_RECORD","lookupContext":"Pricebook2Id","lookupConfigId":"a0DS000000BfBXVMA3","id":null,"column":1},{"type":"Field","sequence":2,"row":2,"required":true,"readOnly":false,"overrideLookupContext":false,"name":"QuantityConsumed","lookupMatchingField":null,"lookupContextSource":null,"lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":3,"row":3,"required":false,"readOnly":false,"overrideLookupContext":false,"name":"UnitPrice","lookupMatchingField":null,"lookupContextSource":null,"lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":4,"row":4,"required":false,"readOnly":false,"overrideLookupContext":false,"name":"Description","lookupMatchingField":null,"lookupContextSource":null,"lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":5,"row":5,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"SVMXA360__ConsumedDate__c","lookupMatchingField":null,"lookupContextSource":null,"lookupContext":null,"lookupConfigId":null,"id":null,"column":1}],"deleteRow":true,"controllerReferenceField":"WorkOrderId","allowZeroLines":false,"addRow":true},{"valueMapping":null,"sourceObjectAPIName":null,"sourceControllerReferenceField":null,"sortBy":null,"sequence":3,"qualifyingCriteria":null,"presentationType":"Grid","objectAPIName":"Expense","name":"Expenses","id":null,"fieldMapping":null,"elements":[{"type":"Field","sequence":1,"row":1,"required":true,"readOnly":false,"overrideLookupContext":false,"name":"ExpenseType","lookupMatchingField":null,"lookupContextSource":null,"lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":2,"row":2,"required":true,"readOnly":false,"overrideLookupContext":false,"name":"Amount","lookupMatchingField":null,"lookupContextSource":null,"lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":3,"row":3,"required":true,"readOnly":false,"overrideLookupContext":false,"name":"Description","lookupMatchingField":null,"lookupContextSource":null,"lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":4,"row":4,"required":true,"readOnly":false,"overrideLookupContext":false,"name":"TransactionDate","lookupMatchingField":null,"lookupContextSource":null,"lookupContext":null,"lookupConfigId":null,"id":null,"column":1}],"deleteRow":true,"controllerReferenceField":"WorkOrderId","allowZeroLines":false,"addRow":true}],"lastModifiedDate":"2021-02-19 22:09:12","lastModifiedBy":"User User","id":null,"developerName":"WORD_Manage_Review_Screen","description":"Edit Work Order review screen"}],"wizardList":[{"steps":[{"type":"Flow","target":"RORD_Manage_Return_Order_Submission","stepParameters":null,"sequence":1,"referenceId":null,"processWizardId":"a0LS000000BIFXCMA5","openAsModal":false,"namespace":"SVMXA360","name":"Submit Return Order","lastModifiedDate":"2021-02-19T22:09:15.000Z","lastModifiedBy":"User User","isVisible":true,"isModified":false,"id":null,"iconName":null,"helpText":"Submit a Return Order","expressionName":"A360 - Return Order - Draft","expressionId":"a08S000000IGp6HIAT","criteriaActionHelpText":"Can only Submit a Draft Return Order","criteriaAction":"Disable Step"},{"type":"Flow","target":"RORD_Manage_Return_Order_Cancellation","stepParameters":null,"sequence":2,"referenceId":null,"processWizardId":"a0LS000000BIFXCMA5","openAsModal":false,"namespace":"SVMXA360","name":"Cancel Return Order","lastModifiedDate":"2021-02-19T22:09:15.000Z","lastModifiedBy":"User User","isVisible":true,"isModified":false,"id":null,"iconName":null,"helpText":"Cancel a Return Order","expressionName":"A360 - Return Order - Not Closed Nor Canceled","expressionId":"a08S000000IGp6IIAT","criteriaActionHelpText":"Cannot cancel a Return Order when it is Closed or Canceled","criteriaAction":"Disable Step"}],"sequence":0,"scope":"Object","referenceId":null,"objectAPIName":"ReturnOrder","name":"Return Order Management","lastModifiedDate":"2021-02-19T22:09:15.000Z","lastModifiedBy":"User User","isVisible":true,"isModified":false,"id":null,"expressionName":null,"expressionId":null,"developerName":"RORD_Management_Wizard","description":"Steps to manage the lifecycle of a Return Order","active":true,"access":[{"profileId":"00eS0000000xt4sIAA","processWizardId":"a0LS000000BIFXCMA5","name":"PWA-00000000","lastModifiedDate":"2021-02-19T22:09:16.000Z","lastModifiedBy":"User User","isModified":false,"id":null}]}],"entitlementRuleList":[{"objectAPIName":"Case","name":"Case Entitlement - A360","matchAccount":true,"lastModifiedDate":"2021-02-19T22:09:17.000Z","lastModifiedBy":"User User","includeRootAsset":true,"includeParentAsset":false,"id":null,"developerName":"CASE_Entitlement","defaultBillingType":null,"coveredBy":"Asset","assetAPIName":"AssetId","accountAPIName":"AccountId","warrantyTypes":null,"sequence":1,"resolutionMethod":"USE-WARRANTY","matchContact":false,"isActive":true,"expression":{"type":null,"objectAPIName":null,"name":null,"lastModifiedDate":null,"lastModifiedBy":null,"id":null,"expressionType":null,"expressionDetailList":null,"developerName":null,"description":null,"criteria":null,"advancedExpression":null},"description":"Default entitlement rule for Case","checkWarranties":true,"checkContracts":true}],"adminPageList":[{"targetType":null,"targetDeveloperName":null,"sequence":1,"parameters":null,"pageType":"GROUP","name":"Entitlement","isActive":true,"id":"a01S000000P8cixIAB","developerName":"entitlement","description":"Entitlement Grouping","children":[{"targetType":"LWC","targetDeveloperName":"c-automatic-rules","sequence":1,"parameters":null,"pageType":"PAGE","name":"Automatic Rules","isActive":true,"id":"a01S000000P8cj2IAB","developerName":"automatic_rules","description":"Automatic Rules","children":null},{"targetType":"LWC","targetDeveloperName":"c-entitlement-settings","sequence":2,"parameters":null,"pageType":"PAGE","name":"Interactive Entitlement","isActive":true,"id":"a01S000000P8cj3IAB","developerName":"interactive_entitlement","description":"Interactive Entitlement","children":null},{"targetType":"LWC","targetDeveloperName":"c-service-assignment-rules","sequence":3,"parameters":null,"pageType":"PAGE","name":"Service Assignment Rules","isActive":true,"id":"a01S000000P8cj4IAB","developerName":"service_assignment_rules","description":"Service Assignment Rules","children":null},{"targetType":"LWC","targetDeveloperName":"c-pricebook-assignment-list-view","sequence":4,"parameters":null,"pageType":"PAGE","name":"Pricebook Assignment Rules","isActive":true,"id":"a01S000000P8cj5IAB","developerName":"pricebook_assignment_rules","description":"Pricebook Assignment Rules","children":null},{"targetType":"LWC","targetDeveloperName":"c-entitlement-common-settings","sequence":5,"parameters":null,"pageType":"PAGE","name":"Settings","isActive":true,"id":"a01S000000P8cj6IAB","developerName":"entitlement_common_settings","description":"Entitlement Common Settings","children":null}]}], "transactionList":[{"pageHeader":{"valueMapping":null,"transactionType":"Standalone Edit","sourceObjectAPIName":null,"sections":[{"sequence":3,"name":"Opportunity","id":null,"elements":[{"type":"Field","sequence":1,"row":1,"required":false,"readOnly":false,"overrideLookupContext":false,"name":"SVMXA360__OpportunityIdentified__c","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":2,"row":1,"required":false,"readOnly":false,"overrideLookupContext":false,"name":"SVMXA360__OpportunityNotes__c","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":2}],"columns":2},{"sequence":1,"name":"Work Order","id":null,"elements":[{"type":"Field","sequence":1,"row":1,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"AssetId","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":2,"row":1,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"SVMXA360__ProductId__c","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":2},{"type":"Field","sequence":3,"row":2,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"Pricebook2Id","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":4,"row":2,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"SVMXA360__BillingType__c","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":2}],"columns":2},{"sequence":2,"name":"Debrief","id":null,"elements":[{"type":"Field","sequence":1,"row":1,"required":false,"readOnly":false,"overrideLookupContext":false,"name":"Subject","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":2,"row":1,"required":false,"readOnly":false,"overrideLookupContext":false,"name":"SVMXA360__Symptom__c","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":2},{"type":"Field","sequence":3,"row":2,"required":false,"readOnly":false,"overrideLookupContext":false,"name":"Description","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":4,"row":2,"required":false,"readOnly":false,"overrideLookupContext":false,"name":"SVMXA360__RootCause__c","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":2},{"type":"Field","sequence":5,"row":3,"required":false,"readOnly":false,"overrideLookupContext":false,"name":"SVMXA360__Resolution__c","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":2}],"columns":2}],"screenType":"Transaction","qualifyingCriteria":null,"objectAPIName":"WorkOrder","fieldMapping":null},"name":"A360 - Manage Work Order Debrief","lines":[{"valueMapping":"a0FS000000EDjbfMAD","sourceObjectAPIName":null,"sourceControllerReferenceField":null,"sortBy":null,"sequence":1,"qualifyingCriteria":null,"presentationType":null,"objectAPIName":"WorkOrderLineItem","name":"Labor/Travel","id":"a0AS000000BynghMAB","fieldMapping":null,"elements":[{"type":"Field","sequence":1,"row":1,"required":true,"readOnly":false,"overrideLookupContext":false,"name":"SVMXA360__LineType__c","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":2,"row":2,"required":true,"readOnly":false,"overrideLookupContext":true,"name":"PricebookEntryId","lookupMatchingField":"Pricebook2Id","lookupContextSource":"PARENT_RECORD","lookupContext":"Pricebook2Id","lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":3,"row":3,"required":true,"readOnly":false,"overrideLookupContext":false,"name":"Quantity","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":4,"row":4,"required":false,"readOnly":false,"overrideLookupContext":false,"name":"StartDate","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":5,"row":5,"required":false,"readOnly":false,"overrideLookupContext":false,"name":"EndDate","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":6,"row":6,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"ListPrice","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":7,"row":7,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"SVMXA360__EntitledDiscount__c","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":8,"row":8,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"SVMXA360__Surcharge__c","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":9,"row":9,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"SVMXA360__EntitledPrice__c","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":10,"row":10,"required":false,"readOnly":false,"overrideLookupContext":false,"name":"UnitPrice","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":11,"row":11,"required":false,"readOnly":false,"overrideLookupContext":false,"name":"Discount","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":12,"row":12,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"TotalPrice","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":13,"row":13,"required":false,"readOnly":false,"overrideLookupContext":false,"name":"Status","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1}],"deleteRow":true,"controllerReferenceField":"WorkOrderId","allowZeroLines":true,"addRow":true},{"valueMapping":null,"sourceObjectAPIName":null,"sourceControllerReferenceField":null,"sortBy":null,"sequence":2,"qualifyingCriteria":null,"presentationType":null,"objectAPIName":"ProductConsumed","name":"Product Consumed","id":null,"fieldMapping":null,"elements":[{"type":"Field","sequence":1,"row":1,"required":true,"readOnly":false,"overrideLookupContext":true,"name":"PricebookEntryId","lookupMatchingField":"Pricebook2Id","lookupContextSource":"PARENT_RECORD","lookupContext":"Pricebook2Id","lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":2,"row":2,"required":true,"readOnly":false,"overrideLookupContext":false,"name":"QuantityConsumed","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":5,"row":5,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"SVMXA360__Surcharge__c","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":6,"row":6,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"SVMXA360__EntitledPrice__c","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":7,"row":7,"required":false,"readOnly":false,"overrideLookupContext":false,"name":"UnitPrice","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":8,"row":8,"required":false,"readOnly":false,"overrideLookupContext":false,"name":"Discount","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":9,"row":9,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"TotalPrice","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":3,"row":3,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"ListPrice","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":4,"row":4,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"SVMXA360__EntitledDiscount__c","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1}],"deleteRow":true,"controllerReferenceField":"WorkOrderId","allowZeroLines":true,"addRow":true},{"valueMapping":"a0FS000000EDjbgMAD","sourceObjectAPIName":null,"sourceControllerReferenceField":null,"sortBy":null,"sequence":3,"qualifyingCriteria":null,"presentationType":null,"objectAPIName":"Expense","name":"Expense","id":null,"fieldMapping":null,"elements":[{"type":"Field","sequence":1,"row":1,"required":true,"readOnly":false,"overrideLookupContext":false,"name":"ExpenseType","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":3,"row":3,"required":true,"readOnly":false,"overrideLookupContext":false,"name":"SVMXA360__ExpenseItem__c","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":2,"row":2,"required":true,"readOnly":false,"overrideLookupContext":false,"name":"TransactionDate","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":4,"row":4,"required":true,"readOnly":false,"overrideLookupContext":false,"name":"Quantity","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":5,"row":5,"required":true,"readOnly":false,"overrideLookupContext":false,"name":"Amount","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":8,"row":8,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"SVMXA360__EntitledPrice__c","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":9,"row":9,"required":false,"readOnly":false,"overrideLookupContext":false,"name":"UnitPrice","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":10,"row":10,"required":false,"readOnly":false,"overrideLookupContext":false,"name":"Discount","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":11,"row":11,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"TotalPrice","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":12,"row":12,"required":false,"readOnly":false,"overrideLookupContext":false,"name":"Description","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":6,"row":6,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"SVMXA360__EntitledDiscount__c","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1},{"type":"Field","sequence":7,"row":7,"required":false,"readOnly":true,"overrideLookupContext":false,"name":"SVMXA360__Surcharge__c","lookupMatchingField":null,"lookupContextSource":"CURRENT_RECORD","lookupContext":null,"lookupConfigId":null,"id":null,"column":1}],"deleteRow":true,"controllerReferenceField":"WorkOrderId","allowZeroLines":true,"addRow":true}],"lastModifiedDate":"2021-02-19 22:09:17","lastModifiedBy":"User User","id":null,"developerName":"WORD_Manage_Debrief_Transaction","description":"Edit Work Order for debrief"}],"lookupConfigList":[{"searchFields":"Name","recordsPerPage":20,"objectAPIName":"PricebookEntry","name":"Product Consumed Product Lookup","lastModifiedDate":"2021-02-19 22:09:11","lastModifiedBy":"User User","id":"a0DS000000BfBXVMA3","fieldToReturn":"Name","extendedFields":null,"displayFields":"Name,UnitPrice","developerName":"Product_Consumed_Product_Lookup","description":null,"defaultOperator":null,"defaultLookup":true,"basicFilterId":null,"basicFilter":null}]}';
        SvmxTooling.ConfigurationData configurationData = (SvmxTooling.ConfigurationData) JSON.deserialize(jsonData, SvmxTooling.ConfigurationData.class);
        String testJsonData = JSON.serialize(configurationData);
        TOOL_AbstractDataHandler.testJsonData = testJsonData;
        importHandler.initHandler();
        System.assert(importHandler !=null); 
        
        Test.stopTest();
    }
}