<template>
    <article
        class={computedCardClass}
        tabindex="0"
        onblur={handleBlur}
        onfocus={handleFocus}
    >
        <div class="slds-card__header slds-grid">
            <header
                class="slds-media slds-media_center slds-has-flexi-truncate"
            >
                <div class="slds-media__figure">
                    <template if:true={isSvmxIcon}>
                        <lightning-icon
                            src={iconName}
                            size="small"
                        ></lightning-icon>
                    </template>
                    <template if:false={isSvmxIcon}>
                        <lightning-icon
                            icon-name={iconName}
                            size="small"
                        ></lightning-icon>
                    </template>
                </div>
                <div class="slds-media__body slds-text-link_reset slds-clearfix" onclick={handleClick}>
                    <h2 class="slds-card__header-title slds-float_left">
                        <lightning-formatted-rich-text
                            value={stepNameFormatted} disable-linkify>
                        </lightning-formatted-rich-text>
                    </h2>
                    <template if:true={showDevName}>
                        <div class="slds-float_right slds-var-p-right_medium slds-truncate_container_33 slds-text-body_small slds-text-color_weak">
                            <div class = "svmx-wizard-step_dev-name slds-list_horizontal">
                                <div class="slds-truncate slds-col">
                                    <lightning-formatted-rich-text
                                        value={stepDevNameFormatted} disable-linkify>
                                    </lightning-formatted-rich-text>
                                </div>
                            </div>
                        </div>
                    </template>
                </div>
                <div class="slds-no-flex">
                    <lightning-button-menu
                        class="step-config-button"
                        alternative-text={i18n.menuAlText}
                        variant="border-filled"
                        menu-alignment="right"
                        icon-name="utility:settings"
                        onfocus={handleSettingMenuFocus}
                        onblur={handleSettingMenuBlur}
                        onselect={handleSettingsMenuSelect}
                    >
                        <template for:each={menuItems} for:item="item">
                            <lightning-menu-item
                                label={item.label}
                                value={item.value}
                                key={item.id}
                            >
                            </lightning-menu-item>
                        </template>
                    </lightning-button-menu>
                </div>
            </header>
        </div>
    </article>
</template>