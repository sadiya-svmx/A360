<template>
    <div role="group" aria-labelledby="group-label">
        <div id="group-label" class={computedGroupLabelClass}>
            {label}
        </div>
        <lightning-helptext if:true={fieldLevelHelp} content={fieldLevelHelp}></lightning-helptext>
        <div class="slds-form-element__control">
            <div class="listbox" onfocusin={handleFocus} onfocusout={handleBlur}>
                <div class="listbox__column listbox__column_responsive">
                    <div class={computedListboxContainerClass} style={computedColumnStyle}>
                        <ul data-list-box id="option-list" aria-multiselectable="true" class="slds-listbox slds-listbox_vertical" role="listbox" aria-disabled={ariaDisabled}>
                            <template for:each={computedOptions} for:item="option" for:index="index">
                                <li key={option.value} role="presentation" class="slds-listbox__item">
                                    <div class={option.classList} 
                                        aria-selected={option.selected} 
                                        role="option" 
                                        data-index={index}
                                        data-value={option.value} 
                                        onclick={handleOptionClick} 
                                        onkeydown={handleOptionKeyDown}
                                        tabindex={option.tabIndex}>
                                        <span class="slds-media__body">
                                            <span class="slds-truncate no-user-select svmx-option" title={option.label}>{option.label}</span>
                                        </span>
                                    </div>
                                </li>
                            </template>
                        </ul>
                    </div>
                </div>
                <div class="listbox__column">
                    <button type="button" class="slds-button slds-button_icon slds-button_icon-container listbox__button svmx-button-top" title={i18n.topButtonLabel} onclick={handleTopButtonClick}>
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="slds-button__icon" focusable="false" aria-hidden="true">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M13.0002 2.5H3.00017V4H13.0002V2.5ZM14.0623 12.5L8.00017 5L1.93799 12.5H14.0623Z" fill="#706E6B"></path>
                        </svg>
                        <span class="slds-assistive-text">{i18n.topButtonLabel}</span>
                    </button>
                    <lightning-button-icon class="listbox__button svmx-button-up" icon-name="utility:up" variant="container" onclick={handleUpButtonClick} disabled={disabled} title={i18n.upButtonLabel}
                        alternative-text={i18n.upButtonLabel}>
                    </lightning-button-icon>
                    <lightning-button-icon class="listbox__button svmx-button-down" icon-name="utility:down" variant="container" onclick={handleDownButtonClick} disabled={disabled} title={i18n.downButtonLabel}
                        alternative-text={i18n.downButtonLabel}>
                    </lightning-button-icon>
                    <button type="button" class="slds-button slds-button_icon slds-button_icon-container listbox__button svmx-button-bottom" title={i18n.bottomButtonLabel} onclick={handleBottomButtonClick}>
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="slds-button__icon" focusable="false" aria-hidden="true">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M2 3.5L8.06218 11L14.1244 3.5H2ZM13.0622 13V11.5H3.06218V13H13.0622Z" fill="#706E6B"></path>
                        </svg>
                        <span class="slds-assistive-text">{i18n.bottomButtonLabel}</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</template>